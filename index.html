<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>دانيال SRT - إدارة المخزن</title>
<style>
  :root{--bg:#f6f7fb;--card:#ffffff;--ink:#111;--muted:#666;--brand:#4f46e5;--brand-2:#22c55e;--warn:#f59e0b;--danger:#ef4444;--ring:rgba(79,70,229,.2)}
  *{box-sizing:border-box}
  body{margin:0;font-family:Tahoma,Arial,sans-serif;background:var(--bg);color:var(--ink)}
  header{position:sticky;top:0;z-index:10;background:#1f2937;color:#fff;padding:18px 16px;text-align:center;font-weight:800;letter-spacing:1.5px;font-size:28px}
  header .sub{display:block;font-weight:400;font-size:12px;opacity:.8;margin-top:4px}
  .wrap{max-width:1100px;margin:18px auto;padding:0 12px}
  .card{background:var(--card);border-radius:14px;box-shadow:0 6px 24px rgba(0,0,0,.06);padding:16px}
  .login{max-width:420px;margin:8vh auto;display:flex;flex-direction:column;gap:10px;align-items:stretch}
  input,select,button{padding:10px 12px;border:1px solid #d8dbe8;border-radius:10px;font-size:14px;outline:none}
  input:focus{border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}
  button{border:none;cursor:pointer;font-weight:700}
  .btn{background:var(--brand);color:#fff;transition:.15s transform}
  .btn:hover{transform:translateY(-1px)}
  .btn.sec{background:#0ea5e9}
  .btn.alt{background:var(--brand-2)}
  .btn.warn{background:var(--warn)}
  .btn.ghost{background:#e5e7eb;color:#111}
  .btn.danger{background:var(--danger)}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .grow{flex:1}
  .layout{display:grid;grid-template-columns:260px 1fr;gap:14px}
  @media(max-width:980px){.layout{grid-template-columns:1fr}}
  .side{position:sticky;top:86px;align-self:start}
  .side .menu{display:flex;flex-direction:column;gap:8px}
  .menu button{display:flex;justify-content:space-between;align-items:center}
  .title{font-size:18px;font-weight:800;margin:0 0 6px}
  .muted{color:var(--muted);font-size:12px}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{border-bottom:1px solid #eceff6;padding:10px;text-align:center}
  thead th{background:#fafbff;font-size:13px}
  tbody tr.low{background:#fff2f2}
  .badge{font-size:12px;padding:4px 8px;border-radius:999px;background:#eef2ff;color:#3730a3}
  .notice{position:fixed;left:50%;top:18px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:999px;display:none;z-index:999}
  .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  .kpi{background:#f8fafc;border:1px solid #eef2f7;border-radius:12px;padding:10px;text-align:center}
  .kpi .v{font-size:18px;font-weight:800}
  .chip{display:inline-block;padding:4px 8px;border-radius:999px;background:#f1f5f9;font-size:12px;margin-inline:2px}
  .tools{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  @media print{header,.side,.tools,.notice,.login{display:none!important}.wrap{max-width:100%;margin:0;padding:0}.card{box-shadow:none;padding:0}body{background:#fff}}
</style>
</head>
<body>
<header>
  دانيال SRT
  <span class="sub">إدارة مخزن بسيطة وسريعة</span>
</header>

<div id="notice" class="notice"></div>

<div id="login" class="wrap">
  <div class="card login">
    <h2 style="margin:0;text-align:center">تسجيل الدخول</h2>
    <div class="row">
      <input id="user" class="grow" placeholder="اسم المستخدم" />
      <input id="pass" class="grow" type="password" placeholder="كلمة المرور" />
    </div>
    <button class="btn" onclick="login()">دخول</button>
    <div class="row" style="justify-content:space-between">
      <button class="btn ghost grow" onclick="showRecover()">استرجاع الحساب</button>
      <span class="muted">المستخدم الافتراضي: admin / 1234</span>
    </div>
  </div>
</div>

<div id="app" class="wrap" style="display:none">
  <div class="layout">
    <aside class="side">
      <div class="card">
        <p class="title">القائمة</p>
        <div class="menu">
          <button class="btn ghost" onclick="switchView('inv')">📦 المخزون <span class="badge" id="countBadge">0</span></button>
          <button class="btn ghost" onclick="switchView('rep')">📄 كشف الحساب</button>
          <button class="btn ghost" onclick="switchView('events')">🕘 سجل العمليات</button>
          <button class="btn ghost" onclick="switchView('settings')">⚙️ الإعدادات</button>
          <button class="btn warn" onclick="window.print()">🖨️ طباعة</button>
          <button class="btn danger" onclick="logout()">🔒 خروج</button>
        </div>
      </div>
    </aside>

    <main>
      <section id="view-inv" class="card">
        <div class="row" style="justify-content:space-between;align-items:center">
          <h3 class="title" style="margin:0">إدارة المخزون</h3>
          <div class="chip">سعر المنتج = سعر البيع</div>
        </div>
        <div class="row">
          <input id="name" class="grow" placeholder="اسم الغرض" />
          <input id="barcode" class="grow" placeholder="باركود / رقم تسلسلي" />
          <input id="qty" type="number" min="0" class="grow" placeholder="الكمية" />
          <input id="price" type="number" min="0" class="grow" placeholder="سعر البيع" />
          <button class="btn alt" onclick="addItem()">➕ إضافة</button>
        </div>
        <div class="row" style="margin-top:6px">
          <input id="search" class="grow" placeholder="بحث" oninput="renderTable()" />
          <button class="btn sec" onclick="exportCSV()">⬇️ تصدير CSV</button>
        </div>
        <table id="table">
          <thead>
            <tr><th>الاسم</th><th>الباركود</th><th>الكمية</th><th>السعر</th><th>الإجمالي</th><th>إجراءات</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </main>
  </div>
</div>

<script>
let users=[{u:"admin",p:"1234"}];
let items=[];
let events=[];
function login(){
  let u=document.getElementById("user").value;
  let p=document.getElementById("pass").value;
  if(users.find(x=>x.u===u&&x.p===p)){document.getElementById("login").style.display="none";document.getElementById("app").style.display="block";notice("تم الدخول");}
  else notice("بيانات خاطئة");
}
function logout(){document.getElementById("login").style.display="block";document.getElementById("app").style.display="none";}
function notice(t){let n=document.getElementById("notice");n.innerText=t;n.style.display="block";setTimeout(()=>n.style.display="none",2000);}
function addItem(){
  let n=document.getElementById("name").value;
  let b=document.getElementById("barcode").value;
  let q=+document.getElementById("qty").value;
  let p=+document.getElementById("price").value;
  if(!n||!b||!q||!p)return notice("اكمل الحقول");
  items.push({n,b,q,p});
  events.push("اضافة "+n);
  renderTable();
  document.getElementById("name").value=document.getElementById("barcode").value=document.getElementById("qty").value=document.getElementById("price").value="";
}
function renderTable(){
  let s=document.getElementById("search").value.toLowerCase();
  let tb=document.querySelector("#table tbody");tb.innerHTML="";
  let f=items.filter(x=>x.n.toLowerCase().includes(s)||x.b.toLowerCase().includes(s));
  f.forEach((it,i)=>{
    let tr=document.createElement("tr");
    tr.innerHTML=`<td>${it.n}</td><td>${it.b}</td><td>${it.q}</td><td>${it.p}</td><td>${it.q*it.p}</td>
    <td><button onclick="delItem(${i})">❌</button></td>`;
    tb.appendChild(tr);
  });
  document.getElementById("countBadge").innerText=items.length;
}
function delItem(i){items.splice(i,1);renderTable();}
function exportCSV(){
  let c="الاسم,الباركود,الكمية,السعر,الاجمالي\n";
  items.forEach(it=>{c+=`${it.n},${it.b},${it.q},${it.p},${it.q*it.p}\n`;});
  let b=new Blob([c],{type:"text/csv"});let a=document.createElement("a");
  a.href=URL.createObjectURL(b);a.download="inventory.csv";a.click();
}
function switchView(v){notice("انتقلت الى "+v);}
function showRecover(){alert("ضع نظام استرجاع مخصص هنا")}
</script>
</body>
</html>
